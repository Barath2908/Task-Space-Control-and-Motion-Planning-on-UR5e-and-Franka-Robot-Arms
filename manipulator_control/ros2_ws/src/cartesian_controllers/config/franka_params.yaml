# Franka Emika Panda Cartesian Controller Parameters
# Author: Barath Kumar JK

cartesian_controller:
  ros__parameters:
    # Robot configuration
    robot: "franka"
    num_joints: 7
    
    # Control loop (Franka supports up to 1kHz)
    control_rate: 1000.0  # Hz
    
    # Joint velocity limits
    max_joint_velocity: 1.5  # rad/s
    
    # Jacobian control parameters
    damping_factor: 0.03
    damping_threshold: 0.01
    adaptive_damping: true
    
    # Position control gains
    position_gain: 10.0
    orientation_gain: 5.0
    
    # Convergence tolerances
    position_tolerance: 0.001  # m
    orientation_tolerance: 0.01  # rad
    
    # Nullspace control (7-DOF specific)
    enable_nullspace: true
    posture_gain: 2.0
    joint_limit_gain: 5.0
    manipulability_gain: 0.1
    joint_limit_threshold: 0.1  # rad
    
    # Preferred posture (arm at ready position)
    preferred_posture: [0.0, -0.785, 0.0, -2.356, 0.0, 1.571, 0.785]
    
    # Joint names
    joint_names:
      - "panda_joint1"
      - "panda_joint2"
      - "panda_joint3"
      - "panda_joint4"
      - "panda_joint5"
      - "panda_joint6"
      - "panda_joint7"
    
    # Joint limits (rad) - from Franka documentation
    joint_lower_limits: [-2.8973, -1.7628, -2.8973, -3.0718, -2.8973, -0.0175, -2.8973]
    joint_upper_limits: [2.8973, 1.7628, 2.8973, -0.0698, 2.8973, 3.7525, 2.8973]

# IK Solver parameters
ik_solver:
  ros__parameters:
    max_iterations: 50
    step_size: 0.5
    position_tolerance: 0.001  # m
    orientation_tolerance: 0.01  # rad
    use_line_search: true
    num_restarts: 5
